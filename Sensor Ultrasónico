/***Variables Globales***/
int Distancia=0;

/***   Declaracion Funcion    ***/
//bqBAT
long TP_init(int trigger_pin, int echo_pin);
long Distance(int trigger_pin, int echo_pin);

void setup()
{

  pinMode( 5 , INPUT );
  pinMode( 4 , OUTPUT );
  Serial.begin(9600);
  pinMode(13,OUTPUT);
  
}


void loop()
{

    Distancia=Distance(4,5);
    Serial.println(Distancia);
    if (Distancia <= 40) {
      digitalWrite(13,HIGH);
      tone(12,494,100);
  // nota musical Si 
      delay(100);
     }
     else {
     
      digitalWrite(13,LOW);
      
     }
}

/*** Definicion Funcion ***/
//bqBAT
long TP_init(int trigger_pin, int echo_pin)
{
  digitalWrite(trigger_pin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigger_pin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigger_pin, LOW);
  long microseconds = pulseIn(echo_pin ,HIGH);
  return microseconds;
}

long Distance(int trigger_pin, int echo_pin)
{
  long microseconds = TP_init(trigger_pin, echo_pin);
  long distance;
  distance = microseconds/29/2;
  if (distance == 0){
    distance = 999;
    
  }
  return distance;
}
